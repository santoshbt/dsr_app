
<div class="container">
	<h1 class="headline">Add a New Report</h1>

	<div class="card">
		<div class="card-block">
			<form [formGroup]="reportForm" (ngSubmit)="creteReport(report)">
				<div class="form-group row">
					<label for="employee_id" class="col-2 col-form-label">Employee ID</label>
					<div class="col-10">
						<input type="number"
										class="form-control"
										id="employee_id"														
										name="employee_id"										
										formControlName="employee_id"
										disabled
						>
					</div>
				</div>		
				<div class="form-group row">
					<label for="employee_name" class="col-2 col-form-label"> Employee Name</label>
					<div class="col-10">
						<input type="text"
										class="form-control"
										id="employee_name"							
										name="employee_name"										
										formControlName="employee_name"
										disabled
						>
					</div>
				</div>

				<div class="form-group row">
					<label for="employee_email" class="col-2 col-form-label">Employee Email</label>
					<div class="col-10">
						<input type="email"
										class="form-control"
										id="employee_email"														
										name="employee_email"								
										formControlName="employee_email"
										disabled
						>
					</div>
				</div>
				<hr />
				<div formArrayName="projects">					
					<div *ngFor="let project of reportForm.controls.projects.controls; let i=index" class="panel panel-default">
						<div class="panel-heading">
							<h2>Task {{i + 1}}</h2>
							<!--"projectForm.controls"-->
							<span class="glyphicon glyphicon-remove pull-right" *ngIf="reportForm.controls.projects.controls.length > 1"></span>
						</div>

						<div class="panel-body" [formGroupName]="i">
							<project [projectgroup]="reportForm.controls.projects"></project>
						</div>
					</div>															
				</div>
				

				<button type="submit"
						class='btn btn-outline-primary btn-lg'
						[disabled]="!reportForm.valid"
						[hidden]="submitted"
					>
						Update My Report
					</button>					
			</form>
			<div class="margin-20">
				<a (click)="addTask()" style="cursor: default">
					Add another Task +
				</a>
        	</div>

			<div class="clearfix"></div>

			<div class="margin-20">
				<div>myForm details:-</div>
				<pre>Is myForm valid?: <br>{{reportForm.valid | json}}</pre>
				<pre>form value: <br>{{reportForm.value | json }}</pre>
			</div>
		</div>	
	</div>
</div>
